"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/[[...route]]/route",{

/***/ "(rsc)/./app/api/[[...route]]/summary.ts":
/*!*****************************************!*\
  !*** ./app/api/[[...route]]/summary.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var hono__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hono */ \"(rsc)/./node_modules/hono/dist/index.js\");\n/* harmony import */ var _hono_zod_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @hono/zod-validator */ \"(rsc)/./node_modules/@hono/zod-validator/dist/esm/index.js\");\n/* harmony import */ var _hono_clerk_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @hono/clerk-auth */ \"(rsc)/./node_modules/@hono/clerk-auth/dist/index.js\");\n/* harmony import */ var _barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=differenceInDays,parse,subDays!=!date-fns */ \"(rsc)/./node_modules/date-fns/subDays.mjs\");\n/* harmony import */ var _barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=differenceInDays,parse,subDays!=!date-fns */ \"(rsc)/./node_modules/date-fns/parse.mjs\");\n/* harmony import */ var _barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=differenceInDays,parse,subDays!=!date-fns */ \"(rsc)/./node_modules/date-fns/differenceInDays.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/functions/aggregate.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var _db_drizzle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/db/drizzle */ \"(rsc)/./db/drizzle.ts\");\n/* harmony import */ var _db_schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/db/schema */ \"(rsc)/./db/schema.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./lib/utils.ts\");\n\n\n\n\n\n\n\n\n\nconst app = new hono__WEBPACK_IMPORTED_MODULE_0__.Hono().get(\"/\", (0,_hono_clerk_auth__WEBPACK_IMPORTED_MODULE_2__.clerkMiddleware)(), (0,_hono_zod_validator__WEBPACK_IMPORTED_MODULE_1__.zValidator)(\"query\", zod__WEBPACK_IMPORTED_MODULE_6__.z.object({\n    from: zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional(),\n    to: zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional(),\n    accountId: zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional()\n})), async (c)=>{\n    const auth = (0,_hono_clerk_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(c);\n    const { from, to, accountId } = c.req.valid(\"query\");\n    if (!auth?.userId) {\n        return c.json({\n            error: \"Unauthorized\"\n        }, 401);\n    }\n    const defaultTo = new Date();\n    const defaultFrom = (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_7__.subDays)(defaultTo, 60);\n    const startDate = from ? (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_8__.parse)(from, \"dd-MM-yyyy\", new Date()) : defaultFrom;\n    const endDate = to ? (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_8__.parse)(to, \"dd-MM-yyyy\", new Date()) : defaultTo;\n    const periodLength = (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_9__.differenceInDays)(endDate, startDate) + 1;\n    const lastPeriodStart = (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_7__.subDays)(startDate, periodLength);\n    const lastPeriodEnd = (0,_barrel_optimize_names_differenceInDays_parse_subDays_date_fns__WEBPACK_IMPORTED_MODULE_7__.subDays)(endDate, periodLength);\n    async function fetchFinancialData(userId, startDate, endDate) {\n        return await _db_drizzle__WEBPACK_IMPORTED_MODULE_3__.db.select({\n            income: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(CASE WHEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} >= 0 THEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} ELSE 0 END)`.mapWith(Number),\n            expenses: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(CASE WHEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} < 0 THEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} ELSE 0 END)`.mapWith(Number),\n            remaining: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.sum)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount).mapWith(Number)\n        }).from(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions).innerJoin(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, _db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.id)).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.and)(accountId ? (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, accountId) : undefined, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.userId, userId), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.gte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, startDate), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.lte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, endDate)));\n    }\n    const [currentPeriod] = await fetchFinancialData(auth.userId, startDate, endDate);\n    const [lastPeriod] = await fetchFinancialData(auth.userId, lastPeriodStart, lastPeriodEnd);\n    const incomeChange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__.calculatePercentage)(currentPeriod.income, lastPeriod.income);\n    const expensesChange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__.calculatePercentage)(currentPeriod.expenses, lastPeriod.expenses);\n    const remainingChange = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__.calculatePercentage)(currentPeriod.remaining, lastPeriod.remaining);\n    const category = await _db_drizzle__WEBPACK_IMPORTED_MODULE_3__.db.select({\n        name: _db_schema__WEBPACK_IMPORTED_MODULE_4__.categories.name,\n        value: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(ABS(${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount}))`.mapWith(Number)\n    }).from(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions).innerJoin(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, _db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.id)).innerJoin(_db_schema__WEBPACK_IMPORTED_MODULE_4__.categories, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.categoryId, _db_schema__WEBPACK_IMPORTED_MODULE_4__.categories.id)).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.and)(accountId ? (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, accountId) : undefined, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.userId, auth.userId), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.lt)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount, 0), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.gte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, startDate), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.lte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, endDate))).groupBy(_db_schema__WEBPACK_IMPORTED_MODULE_4__.categories.name).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_13__.desc)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(ABS(${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount}))`));\n    const topCategories = category.slice(0, 3);\n    const otherCategories = category.slice(3);\n    const otherSum = otherCategories.reduce((sum, current)=>sum + current.value, 0);\n    const finalCategories = topCategories;\n    if (otherCategories.length > 0) {\n        finalCategories.push({\n            name: \"Other\",\n            value: otherSum\n        });\n    }\n    const activeDays = await _db_drizzle__WEBPACK_IMPORTED_MODULE_3__.db.select({\n        date: _db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date,\n        income: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(CASE WHEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} >= 0 THEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} ELSE 0 END)`.mapWith(Number),\n        expenses: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`SUM(CASE WHEN ${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount} < 0 THEN ABS(${_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.amount}) ELSE 0 END)`.mapWith(Number)\n    }).from(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions).innerJoin(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, _db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.id)).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.and)(accountId ? (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.accountId, accountId) : undefined, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.accounts.userId, auth.userId), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.gte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, startDate), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_12__.lte)(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date, endDate))).groupBy(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date).orderBy(_db_schema__WEBPACK_IMPORTED_MODULE_4__.transactions.date);\n    const days = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__.fillMissingDays)(activeDays, startDate, endDate);\n    return c.json({\n        data: {\n            remainingAmount: currentPeriod.remaining,\n            remainingChange,\n            incomeAmount: currentPeriod.income,\n            incomeChange,\n            expensesAmount: currentPeriod.expenses,\n            expensesChange,\n            categories: finalCategories,\n            days\n        }\n    });\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sRUFBRUgsS0FBS0csTUFBTSxHQUMvQnZCLGlEQUFHQSxDQUFDUSxvREFBWUEsQ0FBQ3NDLElBQUksRUFBRWpCLFlBQ3ZCM0IsaURBQUdBLENBQUNNLG9EQUFZQSxDQUFDc0MsSUFBSSxFQUFFaEIsV0FHMUIwQixPQUFPLENBQUNoRCxvREFBWUEsQ0FBQ3NDLElBQUksRUFDekJXLE9BQU8sQ0FBQ2pELG9EQUFZQSxDQUFDc0MsSUFBSTtJQUU1QixNQUFNc0IsT0FBTzFELDJEQUFlQSxDQUFDeUQsWUFBWXRDLFdBQVdDO0lBRXBELE9BQU9YLEVBQUVLLElBQUksQ0FBQztRQUNaNkMsTUFBTTtZQUNKQyxpQkFBaUJ2QixjQUFjTixTQUFTO1lBQ3hDVTtZQUNBb0IsY0FBY3hCLGNBQWNYLE1BQU07WUFDbENhO1lBQ0F1QixnQkFBZ0J6QixjQUFjUCxRQUFRO1lBQ3RDVTtZQUNBM0MsWUFBWXlEO1lBQ1pJO1FBQ0Y7SUFDRjtBQUNGO0FBR0YsaUVBQWV6RCxHQUFHQSxFQUFDIiwic291cmNlcyI6WyJFOlxcRmluYW5jZVxcZmluYW5jZVxcYXBwXFxhcGlcXFtbLi4ucm91dGVdXVxcc3VtbWFyeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xyXG5pbXBvcnQgeyBIb25vIH0gZnJvbSBcImhvbm9cIjtcclxuaW1wb3J0IHsgelZhbGlkYXRvciB9IGZyb20gXCJAaG9uby96b2QtdmFsaWRhdG9yXCI7XHJcbmltcG9ydCB7IGNsZXJrTWlkZGxld2FyZSwgZ2V0QXV0aCB9IGZyb20gXCJAaG9uby9jbGVyay1hdXRoXCI7XHJcbmltcG9ydCB7IHN1YkRheXMsIHBhcnNlLCBkaWZmZXJlbmNlSW5EYXlzIH0gZnJvbSBcImRhdGUtZm5zXCI7XHJcbmltcG9ydCB7IGFuZCwgZGVzYywgZXEsIGd0ZSwgbHQsIGx0ZSwgc3FsLCBzdW0gfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcclxuXHJcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvZGIvZHJpenpsZVwiO1xyXG5pbXBvcnQgeyBhY2NvdW50cywgY2F0ZWdvcmllcywgdHJhbnNhY3Rpb25zIH0gZnJvbSBcIkAvZGIvc2NoZW1hXCI7XHJcbmltcG9ydCB7IGNhbGN1bGF0ZVBlcmNlbnRhZ2UsIGZpbGxNaXNzaW5nRGF5cyB9IGZyb20gXCJAL2xpYi91dGlsc1wiO1xyXG5cclxuY29uc3QgYXBwID0gbmV3IEhvbm8oKS5nZXQoXHJcbiAgXCIvXCIsXHJcbiAgY2xlcmtNaWRkbGV3YXJlKCksXHJcbiAgelZhbGlkYXRvcihcclxuICAgIFwicXVlcnlcIixcclxuICAgIHoub2JqZWN0KHtcclxuICAgICAgZnJvbTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gICAgICB0bzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gICAgICBhY2NvdW50SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgIH0pLFxyXG4gICksXHJcbiAgYXN5bmMgKGMpID0+IHtcclxuICAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGMpO1xyXG4gICAgY29uc3QgeyBmcm9tLCB0bywgYWNjb3VudElkIH0gPSBjLnJlcS52YWxpZChcInF1ZXJ5XCIpO1xyXG5cclxuICAgIGlmICghYXV0aD8udXNlcklkKSB7XHJcbiAgICAgIHJldHVybiBjLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCA0MDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRUbyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBkZWZhdWx0RnJvbSA9IHN1YkRheXMoZGVmYXVsdFRvLCA2MCk7XHJcblxyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gZnJvbVxyXG4gICAgICA/IHBhcnNlKGZyb20sIFwiZGQtTU0teXl5eVwiLCBuZXcgRGF0ZSgpKVxyXG4gICAgICA6IGRlZmF1bHRGcm9tO1xyXG5cclxuICAgIGNvbnN0IGVuZERhdGUgPSB0byA/IHBhcnNlKHRvLCBcImRkLU1NLXl5eXlcIiwgbmV3IERhdGUoKSkgOiBkZWZhdWx0VG87XHJcblxyXG4gICAgY29uc3QgcGVyaW9kTGVuZ3RoID0gZGlmZmVyZW5jZUluRGF5cyhlbmREYXRlLCBzdGFydERhdGUpICsgMTtcclxuICAgIGNvbnN0IGxhc3RQZXJpb2RTdGFydCA9IHN1YkRheXMoc3RhcnREYXRlLCBwZXJpb2RMZW5ndGgpO1xyXG4gICAgY29uc3QgbGFzdFBlcmlvZEVuZCA9IHN1YkRheXMoZW5kRGF0ZSwgcGVyaW9kTGVuZ3RoKTtcclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEZpbmFuY2lhbERhdGEoXHJcbiAgICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgICBzdGFydERhdGU6IERhdGUsXHJcbiAgICAgIGVuZERhdGU6IERhdGVcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgZGJcclxuICAgICAgICAuc2VsZWN0KHtcclxuICAgICAgICAgIGluY29tZTpcclxuICAgICAgICAgICAgc3FsYFNVTShDQVNFIFdIRU4gJHt0cmFuc2FjdGlvbnMuYW1vdW50fSA+PSAwIFRIRU4gJHt0cmFuc2FjdGlvbnMuYW1vdW50fSBFTFNFIDAgRU5EKWAubWFwV2l0aChcclxuICAgICAgICAgICAgICBOdW1iZXJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgIGV4cGVuc2VzOlxyXG4gICAgICAgICAgICBzcWxgU1VNKENBU0UgV0hFTiAke3RyYW5zYWN0aW9ucy5hbW91bnR9IDwgMCBUSEVOICR7dHJhbnNhY3Rpb25zLmFtb3VudH0gRUxTRSAwIEVORClgLm1hcFdpdGgoXHJcbiAgICAgICAgICAgICAgTnVtYmVyXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICByZW1haW5pbmc6IHN1bSh0cmFuc2FjdGlvbnMuYW1vdW50KS5tYXBXaXRoKE51bWJlciksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZnJvbSh0cmFuc2FjdGlvbnMpXHJcbiAgICAgICAgLmlubmVySm9pbihhY2NvdW50cywgZXEodHJhbnNhY3Rpb25zLmFjY291bnRJZCwgYWNjb3VudHMuaWQpKVxyXG4gICAgICAgIC53aGVyZShcclxuICAgICAgICAgIGFuZChcclxuICAgICAgICAgICAgYWNjb3VudElkID8gZXEodHJhbnNhY3Rpb25zLmFjY291bnRJZCwgYWNjb3VudElkKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZXEoYWNjb3VudHMudXNlcklkLCB1c2VySWQpLFxyXG4gICAgICAgICAgICBndGUodHJhbnNhY3Rpb25zLmRhdGUsIHN0YXJ0RGF0ZSksXHJcbiAgICAgICAgICAgIGx0ZSh0cmFuc2FjdGlvbnMuZGF0ZSwgZW5kRGF0ZSlcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtjdXJyZW50UGVyaW9kXSA9IGF3YWl0IGZldGNoRmluYW5jaWFsRGF0YShcclxuICAgICAgYXV0aC51c2VySWQsXHJcbiAgICAgIHN0YXJ0RGF0ZSxcclxuICAgICAgZW5kRGF0ZSxcclxuICAgICk7XHJcbiAgICBjb25zdCBbbGFzdFBlcmlvZF0gPSBhd2FpdCBmZXRjaEZpbmFuY2lhbERhdGEoXHJcbiAgICAgIGF1dGgudXNlcklkLFxyXG4gICAgICBsYXN0UGVyaW9kU3RhcnQsXHJcbiAgICAgIGxhc3RQZXJpb2RFbmQsXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGluY29tZUNoYW5nZSA9IGNhbGN1bGF0ZVBlcmNlbnRhZ2UoXHJcbiAgICAgIGN1cnJlbnRQZXJpb2QuaW5jb21lLFxyXG4gICAgICBsYXN0UGVyaW9kLmluY29tZVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGV4cGVuc2VzQ2hhbmdlID0gY2FsY3VsYXRlUGVyY2VudGFnZShcclxuICAgICAgY3VycmVudFBlcmlvZC5leHBlbnNlcyxcclxuICAgICAgbGFzdFBlcmlvZC5leHBlbnNlc1xyXG4gICAgKTtcclxuICAgIGNvbnN0IHJlbWFpbmluZ0NoYW5nZSA9IGNhbGN1bGF0ZVBlcmNlbnRhZ2UoXHJcbiAgICAgIGN1cnJlbnRQZXJpb2QucmVtYWluaW5nLFxyXG4gICAgICBsYXN0UGVyaW9kLnJlbWFpbmluZ1xyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBjYXRlZ29yeSA9IGF3YWl0IGRiXHJcbiAgICAgIC5zZWxlY3Qoe1xyXG4gICAgICAgIG5hbWU6IGNhdGVnb3JpZXMubmFtZSxcclxuICAgICAgICB2YWx1ZTogc3FsYFNVTShBQlMoJHt0cmFuc2FjdGlvbnMuYW1vdW50fSkpYC5tYXBXaXRoKE51bWJlciksXHJcbiAgICAgIH0pXHJcbiAgICAgIC5mcm9tKHRyYW5zYWN0aW9ucylcclxuICAgICAgLmlubmVySm9pbihhY2NvdW50cywgZXEodHJhbnNhY3Rpb25zLmFjY291bnRJZCwgYWNjb3VudHMuaWQpKVxyXG4gICAgICAuaW5uZXJKb2luKGNhdGVnb3JpZXMsIGVxKHRyYW5zYWN0aW9ucy5jYXRlZ29yeUlkLCBjYXRlZ29yaWVzLmlkKSlcclxuICAgICAgLndoZXJlKFxyXG4gICAgICAgIGFuZChcclxuICAgICAgICAgIGFjY291bnRJZCA/IGVxKHRyYW5zYWN0aW9ucy5hY2NvdW50SWQsIGFjY291bnRJZCkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBlcShhY2NvdW50cy51c2VySWQsIGF1dGgudXNlcklkKSxcclxuICAgICAgICAgIGx0KHRyYW5zYWN0aW9ucy5hbW91bnQsIDApLFxyXG4gICAgICAgICAgZ3RlKHRyYW5zYWN0aW9ucy5kYXRlLCBzdGFydERhdGUpLFxyXG4gICAgICAgICAgbHRlKHRyYW5zYWN0aW9ucy5kYXRlLCBlbmREYXRlKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICAuZ3JvdXBCeShjYXRlZ29yaWVzLm5hbWUpXHJcbiAgICAgIC5vcmRlckJ5KGRlc2Moc3FsYFNVTShBQlMoJHt0cmFuc2FjdGlvbnMuYW1vdW50fSkpYCkpO1xyXG5cclxuICAgIGNvbnN0IHRvcENhdGVnb3JpZXMgPSBjYXRlZ29yeS5zbGljZSgwLCAzKTtcclxuICAgIGNvbnN0IG90aGVyQ2F0ZWdvcmllcyA9IGNhdGVnb3J5LnNsaWNlKDMpO1xyXG4gICAgY29uc3Qgb3RoZXJTdW0gPSBvdGhlckNhdGVnb3JpZXMucmVkdWNlKFxyXG4gICAgICAoc3VtLCBjdXJyZW50KSA9PiBzdW0gKyBjdXJyZW50LnZhbHVlLFxyXG4gICAgICAwXHJcbiAgICApO1xyXG4gICAgY29uc3QgZmluYWxDYXRlZ29yaWVzID0gdG9wQ2F0ZWdvcmllcztcclxuICAgIGlmIChvdGhlckNhdGVnb3JpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmaW5hbENhdGVnb3JpZXMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogXCJPdGhlclwiLFxyXG4gICAgICAgIHZhbHVlOiBvdGhlclN1bSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWN0aXZlRGF5cyA9IGF3YWl0IGRiXHJcbiAgICAgIC5zZWxlY3Qoe1xyXG4gICAgICAgIGRhdGU6IHRyYW5zYWN0aW9ucy5kYXRlLFxyXG4gICAgICAgIGluY29tZTpcclxuICAgICAgICAgIHNxbGBTVU0oQ0FTRSBXSEVOICR7dHJhbnNhY3Rpb25zLmFtb3VudH0gPj0gMCBUSEVOICR7dHJhbnNhY3Rpb25zLmFtb3VudH0gRUxTRSAwIEVORClgLm1hcFdpdGgoXHJcbiAgICAgICAgICAgIE51bWJlclxyXG4gICAgICAgICAgKSxcclxuICAgICAgICBleHBlbnNlczpcclxuICAgICAgICAgIHNxbGBTVU0oQ0FTRSBXSEVOICR7dHJhbnNhY3Rpb25zLmFtb3VudH0gPCAwIFRIRU4gQUJTKCR7dHJhbnNhY3Rpb25zLmFtb3VudH0pIEVMU0UgMCBFTkQpYC5tYXBXaXRoKFxyXG4gICAgICAgICAgICBOdW1iZXJcclxuICAgICAgICAgICksXHJcbiAgICAgIH0pXHJcbiAgICAgIC5mcm9tKHRyYW5zYWN0aW9ucylcclxuICAgICAgLmlubmVySm9pbihhY2NvdW50cywgZXEodHJhbnNhY3Rpb25zLmFjY291bnRJZCwgYWNjb3VudHMuaWQpKVxyXG4gICAgICAud2hlcmUoXHJcbiAgICAgICAgYW5kKFxyXG4gICAgICAgICAgYWNjb3VudElkID8gZXEodHJhbnNhY3Rpb25zLmFjY291bnRJZCwgYWNjb3VudElkKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGVxKGFjY291bnRzLnVzZXJJZCwgYXV0aC51c2VySWQpLFxyXG4gICAgICAgICAgZ3RlKHRyYW5zYWN0aW9ucy5kYXRlLCBzdGFydERhdGUpLFxyXG4gICAgICAgICAgbHRlKHRyYW5zYWN0aW9ucy5kYXRlLCBlbmREYXRlKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICAuZ3JvdXBCeSh0cmFuc2FjdGlvbnMuZGF0ZSlcclxuICAgICAgLm9yZGVyQnkodHJhbnNhY3Rpb25zLmRhdGUpO1xyXG5cclxuICAgIGNvbnN0IGRheXMgPSBmaWxsTWlzc2luZ0RheXMoYWN0aXZlRGF5cywgc3RhcnREYXRlLCBlbmREYXRlKTtcclxuXHJcbiAgICByZXR1cm4gYy5qc29uKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHJlbWFpbmluZ0Ftb3VudDogY3VycmVudFBlcmlvZC5yZW1haW5pbmcsXHJcbiAgICAgICAgcmVtYWluaW5nQ2hhbmdlLFxyXG4gICAgICAgIGluY29tZUFtb3VudDogY3VycmVudFBlcmlvZC5pbmNvbWUsXHJcbiAgICAgICAgaW5jb21lQ2hhbmdlLFxyXG4gICAgICAgIGV4cGVuc2VzQW1vdW50OiBjdXJyZW50UGVyaW9kLmV4cGVuc2VzLFxyXG4gICAgICAgIGV4cGVuc2VzQ2hhbmdlLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGZpbmFsQ2F0ZWdvcmllcyxcclxuICAgICAgICBkYXlzLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iXSwibmFtZXMiOlsieiIsIkhvbm8iLCJ6VmFsaWRhdG9yIiwiY2xlcmtNaWRkbGV3YXJlIiwiZ2V0QXV0aCIsInN1YkRheXMiLCJwYXJzZSIsImRpZmZlcmVuY2VJbkRheXMiLCJhbmQiLCJkZXNjIiwiZXEiLCJndGUiLCJsdCIsImx0ZSIsInNxbCIsInN1bSIsImRiIiwiYWNjb3VudHMiLCJjYXRlZ29yaWVzIiwidHJhbnNhY3Rpb25zIiwiY2FsY3VsYXRlUGVyY2VudGFnZSIsImZpbGxNaXNzaW5nRGF5cyIsImFwcCIsImdldCIsIm9iamVjdCIsImZyb20iLCJzdHJpbmciLCJvcHRpb25hbCIsInRvIiwiYWNjb3VudElkIiwiYyIsImF1dGgiLCJyZXEiLCJ2YWxpZCIsInVzZXJJZCIsImpzb24iLCJlcnJvciIsImRlZmF1bHRUbyIsIkRhdGUiLCJkZWZhdWx0RnJvbSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJwZXJpb2RMZW5ndGgiLCJsYXN0UGVyaW9kU3RhcnQiLCJsYXN0UGVyaW9kRW5kIiwiZmV0Y2hGaW5hbmNpYWxEYXRhIiwic2VsZWN0IiwiaW5jb21lIiwiYW1vdW50IiwibWFwV2l0aCIsIk51bWJlciIsImV4cGVuc2VzIiwicmVtYWluaW5nIiwiaW5uZXJKb2luIiwiaWQiLCJ3aGVyZSIsInVuZGVmaW5lZCIsImRhdGUiLCJjdXJyZW50UGVyaW9kIiwibGFzdFBlcmlvZCIsImluY29tZUNoYW5nZSIsImV4cGVuc2VzQ2hhbmdlIiwicmVtYWluaW5nQ2hhbmdlIiwiY2F0ZWdvcnkiLCJuYW1lIiwidmFsdWUiLCJjYXRlZ29yeUlkIiwiZ3JvdXBCeSIsIm9yZGVyQnkiLCJ0b3BDYXRlZ29yaWVzIiwic2xpY2UiLCJvdGhlckNhdGVnb3JpZXMiLCJvdGhlclN1bSIsInJlZHVjZSIsImN1cnJlbnQiLCJmaW5hbENhdGVnb3JpZXMiLCJsZW5ndGgiLCJwdXNoIiwiYWN0aXZlRGF5cyIsImRheXMiLCJkYXRhIiwicmVtYWluaW5nQW1vdW50IiwiaW5jb21lQW1vdW50IiwiZXhwZW5zZXNBbW91bnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/[[...route]]/summary.ts\n");

/***/ })

});